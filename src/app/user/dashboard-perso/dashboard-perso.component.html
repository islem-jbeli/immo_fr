<div class="dashboard-wrapper d-flex" *ngIf="!isSavedSearchesPage() && !isfavorisuserPage()
&& !isMessagesuserPage() && !isAccountSettingsPage() && !isVisitesPage()">

  <nav class="sidebar">
  <div class="sidebar-logo">
     <h4>🏠 Dashboard</h4>
  </div>
  <ul class="nav flex-column">
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard-perso/saved-searches" >
        <i class="icon">🔍</i>
        <span class="link-text">Recherches</span>
        <span class="badge">12</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard-perso/favorisuser" >
        <i class="icon">❤️</i>
        <span class="link-text">Favoris</span>
        <span class="badge">5</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard-perso/recommandations" >
        <i class="icon">💡</i>
        <span class="link-text">Recommandations</span>
        <span class="badge new">!</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard-perso/messagesuser">
        <i class="icon">✉️</i>
        <span class="link-text">Messages</span>
        <span class="badge">3</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard-perso/account-settings" [class.active]="isAccountSettingsPage()">
        <i class="icon">⚙️</i>
        <span class="link-text">Paramètres</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard-perso/visites" [class.active]="isVisitesPage()">
        <i class="icon">⏰</i>
        <span class="link-text">Historique</span>
      </a>
    </li>
  </ul>
</nav>

  <!-- Main content -->
  <div class="dashboard-main flex-fill p-4">

    <!-- Cartes principales -->
    <div class="row g-4 mb-5">
      <ng-container *ngFor="let card of cards">
        <div class="col-sm-6 col-md-4 d-flex">
          <div class="dashboard-card shadow-sm w-100" [routerLink]="card.link">
            <div class="card-body d-flex align-items-center">
              <span class="icon me-3 fs-3" [ngClass]="card.color">{{ card.emoji }}</span>
              <div>
                <h5 class="card-title mb-1">{{ card.title }}</h5>
                <p class="card-text mb-0">{{ card.subtitle }}</p>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>

    <!-- Statistiques -->
<div class="container mt-4">
  <h2 class="text-center fw-bold mb-2 text-primary">📊 Suivi de vos activités</h2>
  <p class="text-center text-secondary mb-4">
    Suivi de vos activités sur la plateforme (biens vus, visites, recherches, favoris, etc.)
  </p>

  <div class="charts-container d-flex flex-wrap justify-content-center gap-4">
    <!-- Bar chart : Activité mensuelle -->
    <div class="chart-card p-3 shadow-sm bg-white rounded" style="width: 45%;">
      <h5 class="chart-title mb-3">Activité mensuelle</h5>
      <canvas baseChart
              [data]="activityChartData"
              [options]="activityChartOptions"
              chartType="line">
      </canvas>
    </div>

    <!-- Donut chart : Répartition des actions -->
    <div class="chart-card p-3 shadow-sm bg-white rounded" style="width: 45%;">
      <h5 class="chart-title mb-3">Répartition des actions</h5>
      <canvas baseChart
              [data]="actionsChartData"
              [options]="actionsChartOptions"
              chartType="doughnut">
      </canvas>
    </div>
  </div>
</div>

  </div>
</div>

<router-outlet></router-outlet>
