<div class="container mt-4">
  <h2 class="mb-4 fw-bold text-primary d-flex align-items-center">
    <i class="fas fa-envelope-open-text me-2"></i> Mes Messages
  </h2>

  <div *ngIf="messages.length > 0; else noMessages">
    <div *ngFor="let msg of messages" 
         class="card message-card mb-3 shadow-sm border-0"
         [ngClass]="{ 'bg-light': msg.lu, 'border-start border-4 border-primary': !msg.lu }"
         (click)="ouvrirMessage(msg)">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h5 class="card-title mb-1 text-dark">
              <i class="fas fa-user-circle text-primary me-2"></i> {{ msg.expediteur }}
              <span *ngIf="!msg.lu" class="badge bg-primary ms-2">Nouveau</span>
            </h5>
            <p class="card-text text-muted">{{ msg.contenu }}</p>
          </div>
          <small class="text-muted">
            <i class="fas fa-clock me-1"></i> {{ msg.date | date:'short' }}
          </small>
        </div>

        <div class="d-flex justify-content-end mt-2 gap-2">
          <button class="btn btn-sm btn-outline-success" (click)="marquerCommeLu(msg, $event)">
            <i class="fas fa-check"></i> Marquer lu
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="supprimerMessage(msg.id, $event)">
            <i class="fas fa-trash"></i> Supprimer
          </button>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noMessages>
    <div class="alert alert-info text-center py-4 mt-4">
      <i class="fas fa-inbox fa-2x mb-2 text-primary d-block"></i>
      Aucun message reÃ§u pour le moment ğŸ’Œ
    </div>
  </ng-template>
</div>
