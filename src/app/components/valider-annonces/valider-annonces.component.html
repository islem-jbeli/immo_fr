<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="fw-bold text-primary">‚úÖ Gestion de validation des annonces</h2>
    <span class="badge bg-info p-2">Total : {{ filteredAds.length }}</span>
  </div>

  <!-- Filtres et recherche -->
  <div class="row g-3 mb-3">
    <div class="col-md-4">
      <input 
        type="text" 
        class="form-control shadow-sm" 
        placeholder="üîé Rechercher par titre ou propri√©taire..." 
        [(ngModel)]="searchTerm" 
        (ngModelChange)="applyFilters()"
      >
    </div>
    <div class="col-md-3">
      <label for="startDate" class="form-label">Date d√©but</label>
      <input type="date" class="form-control" [(ngModel)]="startDate" (change)="applyFilters()" id="startDate">
    </div>
    <div class="col-md-3">
      <label for="endDate" class="form-label">Date fin</label>
      <input type="date" class="form-control" [(ngModel)]="endDate" (change)="applyFilters()" id="endDate">
    </div>
    <div class="col-md-2 d-flex align-items-end">
      <button class="btn btn-secondary w-100" (click)="resetFilters()">R√©initialiser</button>
    </div>
  </div>

  <!-- Tableau des annonces -->
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover align-middle">
      <thead class="table-primary text-center">
        <tr>
          <th>Titre</th>
          <th>Propri√©taire</th>
          <th>Date de publication</th>
          <th>Statut</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ad of filteredAds | slice:(currentPage-1)*pageSize:(currentPage*pageSize)">
          <td>{{ ad.title }}</td>
          <td>{{ ad.owner }}</td>
          <td>{{ ad.date | date:'dd/MM/yyyy' }}</td>
          <td>
            <span class="badge" [ngClass]="{
              'bg-warning text-dark': ad.status === 'En attente',
              'bg-success': ad.status === 'Valid√©e',
              'bg-danger': ad.status === 'Refus√©e'
            }">{{ ad.status }}</span>
          </td>
          <td class="text-center">
            <button class="btn btn-success btn-sm me-1" (click)="validateAd(ad)">‚úîÔ∏è Valider</button>
            <button class="btn btn-danger btn-sm" (click)="rejectAd(ad)">‚ùå Refuser</button>
          </td>
        </tr>
        <tr *ngIf="filteredAds.length === 0">
          <td colspan="5" class="text-center text-muted">Aucune annonce trouv√©e...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages > 1" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="goToPage(currentPage - 1)">‚¨ÖÔ∏è</a>
      </li>
      <li class="page-item" *ngFor="let page of pagesArray" [class.active]="page === currentPage">
        <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="goToPage(currentPage + 1)">‚û°Ô∏è</a>
      </li>
    </ul>
  </nav>

</div>
