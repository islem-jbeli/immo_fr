<div class="container mt-5">

  <!-- Titre principal -->
  <div class="d-flex align-items-center mb-4">
    <i class="fas fa-chart-bar fa-2x text-primary me-2"></i>
    <h2 class="fw-bold mb-0">statistiques Admin</h2>
  </div>

  <!-- Cartes statistiques principales -->
  <div class="row g-4 mb-4">
    <div class="col-sm-6 col-md-3" *ngFor="let stat of [
        {count: usersCount, label: 'Utilisateurs inscrits', icon: 'fas fa-users', color: 'primary'},
        {count: activeUsersCount, label: 'Comptes actifs', icon: 'fas fa-user-check', color: 'success'},
        {count: inactiveUsersCount, label: 'Comptes inactifs', icon: 'fas fa-user-slash', color: 'secondary'},
        {count: rolesCount, label: 'Rôles différents', icon: 'fas fa-user-shield', color: 'warning'}
      ]">
      <div class="card shadow-sm border-0 text-center h-100 hover-scale">
        <div class="card-body">
          <i class="{{stat.icon}} fa-2x text-{{stat.color}} mb-2"></i>
          <h3 class="fw-bold">{{ stat.count }}</h3>
          <p class="text-muted mb-0">{{ stat.label }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphiques utilisateurs -->
  <div class="row g-4 mb-4">
    <div class="col-lg-6 col-md-12">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-primary text-white fw-bold">
          <i class="fas fa-users me-2"></i> Nombre d'utilisateurs par rôle
        </div>
        <div class="card-body">
          <canvas baseChart
                  [data]="roleChartData"
                  [options]="roleChartOptions"
                  [type]="roleChartType">
          </canvas>
        </div>
      </div>
    </div>

    <div class="col-lg-6 col-md-12">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-info text-white fw-bold">
          <i class="fas fa-user-check me-2"></i> Pourcentage comptes actifs/inactifs
        </div>
        <div class="card-body">
          <canvas baseChart
                  [data]="statusChartData"
                  [type]="statusChartType">
          </canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphiques annonces -->
  <div class="row g-4 mb-4">
    <div class="col-lg-6 col-md-12">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-success text-white fw-bold">
          Répartition par type d'annonce
        </div>
        <div class="card-body">
          <canvas baseChart
                  [data]="typeChartData"
                  [options]="typeChartOptions"
                  [type]="typeChartType">
          </canvas>
        </div>
      </div>
    </div>

    <div class="col-lg-6 col-md-12">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-warning text-white fw-bold">
          Répartition par ville
        </div>
        <div class="card-body">
          <canvas baseChart
                  [data]="cityChartData"
                  [options]="cityChartOptions"
                  [type]="cityChartType">
          </canvas>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-4 mb-4">
    <div class="col-lg-6 col-md-12">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-danger text-white fw-bold">
          Nombre d'annonces validées / refusées / en attente
        </div>
        <div class="card-body">
          <canvas baseChart
                  [data]="statusAdsChartData"
                  [options]="statusAdsChartOptions"
                  [type]="statusAdsChartType">
          </canvas>
        </div>
      </div>
    </div>

    <div class="col-lg-6 col-md-12">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-secondary text-white fw-bold">
          Prix moyens par ville
        </div>
        <div class="card-body">
          <canvas baseChart
                  [data]="priceChartData"
                  [options]="priceChartOptions"
                  [type]="priceChartType">
          </canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Alertes annonces inactives -->
  <div class="row g-4 mb-4">
    <div class="col-12">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-dark text-white fw-bold">
          Alertes : annonces inactives depuis trop longtemps
        </div>
        <div class="card-body">
          <ul class="list-group">
            <li class="list-group-item" *ngFor="let ad of inactiveAds">
              <i class="fas fa-exclamation-triangle text-warning me-2"></i>
              {{ ad.title }} - Inactive depuis {{ ad.daysInactive }} jours
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>
